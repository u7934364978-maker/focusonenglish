# Product Requirements Document (PRD): Adaptive Algorithm for English A2 Course (Database-Driven)

## 1. Overview
The goal is to implement an adaptive learning system for the English A2 course that autonomously selects exercises from the existing database and adjusts difficulty based on student performance. The system will prioritize a "challenge-first" approach, bypassing initial theory materials.

## 2. Goals
- **Database-Driven Exercise Selection**: Exercises must be selected from the `course_exercises` table instead of being generated by AI on-the-fly.
- **Progressive Difficulty (1-4)**: Exercises classified into 4 levels (1: Easiest to 4: Hardest).
- **Performance Monitoring**: Track student hits and misses to adjust difficulty in real-time.
- **Spaced Repetition (SRS)**: Re-introduce failed exercises or concepts at optimal intervals for review.
- **Bypass Theory**: Students start directly with exercises.

## 3. Functional Requirements

### 3.1 Exercise Classification (1-4)
- **Level 1**: Basic greetings, verb 'be' present, personal info.
- **Level 2**: Routines, daily life, past simple (regular/be).
- **Level 3**: Comparisons, present perfect (experiences), future (going to).
- **Level 4**: Advanced A2 grammar, relative clauses, complex sentence building.
*Note: A migration will be needed to add and seed difficulty levels to existing exercises.*

### 3.2 Adaptive Logic
- **Initialization**: Start at Level 1.
- **Progression**: 
  - After 3 consecutive correct answers, increase difficulty level.
  - If a student reaches Level 4 and performs well, the unit/module is mastered.
- **Regression**:
  - If a student fails an exercise, re-present it later (SRS) and potentially decrease level if performance drops significantly.

### 3.3 Spaced Repetition Integration
- Failed exercises must be stored in the `user_srs` table.
- Use the existing SM-2 algorithm to schedule reviews.
- Review sessions should be prioritized before new content if "due".

## 4. Technical Constraints
- Use existing `course_exercises` table in Supabase.
- Integrate with existing `user_srs` table and `update_srs_item` function.
- Exercises are retrieved based on `course_level = 'A2'`.

## 5. Success Metrics
- Mastery of A2 topics through practice.
- Successful implementation of the 1-4 difficulty progression using DB exercises.
